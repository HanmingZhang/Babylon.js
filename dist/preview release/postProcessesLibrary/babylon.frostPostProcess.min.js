var __extends=this&&this.__extends||(function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}})(),BABYLON;!(function(e){var t=(function(t){function n(n,r,o,i,a,s,u){var l=t.call(this,n,"frost",["time","width","height"],["othertexture"],o,i,a,s,u)||this;l.degree=1,l.othertexture=null,l._lastTime=0,l._lastDeltaTime=0,l.othertexture=r?new e.Texture(r,i.getScene(),!0):null;var c=i.getScene().getEngine().getDeltaTime();c!==l._lastDeltaTime&&(l._lastDeltaTime=c,l._lastTime+=l._lastDeltaTime);var f=0,v=0;return l.onApplyObservable.add((function(e){e.setTexture("othertexture",l.othertexture),e.setFloat("width",i.getEngine().getRenderWidth()),e.setFloat("height",i.getEngine().getRenderHeight()),f+=.003,v=f,e.setFloat("time",10*v)})),l}return __extends(n,t),n})(e.PostProcess);e.frostPostProcess=t})(BABYLON||(BABYLON={})),BABYLON.Effect.ShadersStore.frostPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D othertexture;\nuniform float width;\nuniform float height;\nuniform float time;\n#define FROSTYNESS 2.0\n#define COLORIZE 1.0\n#define COLOR_RGB 0.2,1.0,1.0\nfloat rand(vec2 uv) {\nfloat a=dot(uv,vec2(92.,80.));\nfloat b=dot(uv,vec2(41.,62.));\nfloat x=sin(a)+cos(b)*51.;\nreturn fract(x);\n}\n#define HASHSCALE1 .1031\nfloat hash12(vec2 p)\n{\nvec3 p3=fract(vec3(p.xyx)*HASHSCALE1);\np3+=dot(p3,p3.yzx+19.19);\nreturn fract((p3.x+p3.y)*p3.z);\n}\nvoid main( void)\n{\nvec2 uv=vUV;\nvec4 d=texture2D(othertexture,uv);\nvec2 rnd=vec2(rand(uv+d.r*.05),rand(uv+d.b*.05));\n\nconst vec2 lensRadius=vec2(2.0,0.05);\nfloat dist=distance(uv.xy,vec2(0.5,0.5));\nfloat vigfin=pow(1.-smoothstep(lensRadius.x,lensRadius.y,dist),2.);\nrnd*=.025*vigfin+d.rg*FROSTYNESS*vigfin;\nuv+=rnd;\ngl_FragColor=mix(texture2D(textureSampler,uv),vec4(COLOR_RGB,1.0),COLORIZE*vec4(rnd.r));\n}";